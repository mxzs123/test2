<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>订单详情 - 芝生药局</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", sans-serif;
            background-color: #f8faf8;
            color: #333;
            padding-bottom: 20px;
        }

        /* 顶部导航 */
        .top-nav {
            background: white;
            padding: 12px 15px;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 8px rgba(0,0,0,0.05);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .back-btn {
            width: 24px;
            height: 24px;
            cursor: pointer;
            margin-right: 15px;
        }

        .page-title {
            flex: 1;
            text-align: center;
            font-size: 16px;
            font-weight: 500;
        }

        /* 订单状态提示 */
        .status-banner {
            background: linear-gradient(135deg, #4a9b4e, #6ab56e);
            color: white;
            padding: 20px 15px;
            position: relative;
            overflow: hidden;
        }

        .status-banner.reviewing {
            background: linear-gradient(135deg, #2196f3, #64b5f6);
        }

        .status-banner.pending {
            background: linear-gradient(135deg, #ff9800, #ffb74d);
        }

        .status-banner::after {
            content: '';
            position: absolute;
            top: -50%;
            right: -10%;
            width: 200px;
            height: 200px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
        }

        .status-icon {
            width: 40px;
            height: 40px;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .status-text {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .status-desc {
            font-size: 13px;
            opacity: 0.9;
        }

        /* 进度条 */
        .progress-section {
            background: white;
            padding: 20px 15px;
            margin-top: 10px;
        }

        .progress-timeline {
            position: relative;
            padding-left: 30px;
        }

        .progress-item {
            position: relative;
            padding-bottom: 25px;
        }

        .progress-item:last-child {
            padding-bottom: 0;
        }

        .progress-item::before {
            content: '';
            position: absolute;
            left: -22px;
            top: 0;
            width: 14px;
            height: 14px;
            border-radius: 50%;
            background: #ddd;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }

        .progress-item.completed::before {
            background: #4a9b4e;
        }

        .progress-item.current::before {
            background: #2196f3;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .progress-item::after {
            content: '';
            position: absolute;
            left: -15px;
            top: 14px;
            width: 1px;
            height: calc(100% - 14px);
            background: #e0e0e0;
        }

        .progress-item.completed::after {
            background: #4a9b4e;
        }

        .progress-item:last-child::after {
            display: none;
        }

        .progress-title {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .progress-time {
            font-size: 12px;
            color: #999;
        }

        /* 信息区块 */
        .info-section {
            background: white;
            margin-top: 10px;
            padding: 15px;
        }

        .section-title {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 12px;
            padding-bottom: 8px;
            border-bottom: 1px solid #f0f0f0;
        }

        .info-row {
            display: flex;
            margin-bottom: 10px;
            font-size: 14px;
        }

        .info-label {
            color: #999;
            min-width: 80px;
        }

        .info-value {
            color: #333;
            flex: 1;
        }

        /* 商品列表 */
        .product-item {
            display: flex;
            padding: 12px 0;
            border-bottom: 1px solid #f0f0f0;
        }

        .product-item:last-child {
            border-bottom: none;
        }

        .product-image {
            width: 60px;
            height: 60px;
            background: #f0f0f0;
            border-radius: 4px;
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 11px;
            color: #999;
        }
        .product-image img { width: 100%; height: 100%; object-fit: cover; display: block; border-radius: 4px; }

        .product-info {
            flex: 1;
        }

        .product-name {
            font-size: 14px;
            margin-bottom: 4px;
        }

        .product-spec {
            font-size: 12px;
            color: #999;
        }

        .product-right {
            text-align: right;
        }

        .product-price {
            font-size: 14px;
            color: #333;
        }

        .product-quantity {
            font-size: 12px;
            color: #999;
            margin-top: 4px;
        }

        /* 费用明细 */
        .fee-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .fee-label {
            color: #666;
        }

        .fee-value {
            color: #333;
        }

        .fee-total {
            border-top: 1px solid #f0f0f0;
            padding-top: 10px;
            margin-top: 10px;
        }

        .fee-total .fee-value {
            color: #ff5722;
            font-size: 18px;
            font-weight: 600;
        }

        /* 物流信息 */
        .logistics-track {
            padding: 10px 0;
        }

        .track-item {
            display: flex;
            padding: 8px 0;
            font-size: 13px;
        }

        .track-time {
            color: #999;
            min-width: 140px;
        }

        .track-desc {
            color: #333;
            flex: 1;
        }

        .track-item:first-child .track-desc {
            color: #4a9b4e;
            font-weight: 500;
        }

        /* 底部操作 */
        .bottom-actions {
            background: white;
            margin-top: 10px;
            padding: 15px;
            display: flex;
            gap: 10px;
            justify-content: flex-end;
        }

        .action-btn {
            padding: 8px 20px;
            border-radius: 18px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-outline {
            background: white;
            border: 1px solid #ddd;
            color: #666;
        }

        .btn-outline:hover {
            border-color: #4a9b4e;
            color: #4a9b4e;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4a9b4e, #6ab56e);
            border: none;
            color: white;
        }

        /* 处方药标签 */
        .prescription-badge {
            display: inline-block;
            background: #ff9800;
            color: white;
            padding: 2px 6px;
            border-radius: 3px;
            font-size: 11px;
            margin-left: 5px;
        }

        /* 问卷提醒 */
        .questionnaire-notice {
            background: #fff3e0;
            border: 1px solid #ffcc80;
            border-radius: 6px;
            padding: 12px;
            margin-top: 10px;
            font-size: 13px;
            color: #666;
        }

        .notice-title {
            color: #ff9800;
            font-weight: 600;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <!-- 顶部导航 -->
    <div class="top-nav">
        <div class="back-btn" onclick="goBack()">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"/>
            </svg>
        </div>
        <div class="page-title">订单详情</div>
        <div style="width: 24px;"></div>
    </div>

    <!-- 订单状态 -->
    <div class="status-banner" id="statusBanner">
        <div class="status-icon">
            <svg width="40" height="40" viewBox="0 0 24 24" fill="white">
                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
        </div>
        <div class="status-text" id="statusText">订单已提交</div>
        <div class="status-desc" id="statusDesc">您的订单正在处理中</div>
    </div>

    <!-- 进度时间线 -->
    <div class="progress-section">
        <div class="progress-timeline" id="progressTimeline">
            <div class="progress-item completed">
                <div class="progress-title">订单提交成功</div>
                <div class="progress-time">2025-01-15 10:30</div>
            </div>
            <div class="progress-item completed">
                <div class="progress-title">支付成功</div>
                <div class="progress-time">2025-01-15 10:31</div>
            </div>
            <div class="progress-item current" id="reviewingStep">
                <div class="progress-title">药师审核中</div>
                <div class="progress-time">预计1-2小时完成</div>
            </div>
            <div class="progress-item" id="shippingStep">
                <div class="progress-title">商品发货</div>
                <div class="progress-time">-</div>
            </div>
            <div class="progress-item" id="completedStep">
                <div class="progress-title">订单完成</div>
                <div class="progress-time">-</div>
            </div>
        </div>
    </div>

    <!-- 问卷提醒（处方药订单显示） -->
    <div class="info-section" id="questionnaireNotice" style="display: none;">
        <div class="questionnaire-notice">
            <div class="notice-title">温馨提示</div>
            <div>您的订单包含处方药，问卷已提交，药师正在审核中。审核通过后将立即发货。</div>
        </div>
    </div>

    <!-- 订单信息 -->
    <div class="info-section">
        <div class="section-title">订单信息</div>
        <div class="info-row">
            <span class="info-label">订单编号</span>
            <span class="info-value" id="orderNumber">202501150001</span>
        </div>
        <div class="info-row">
            <span class="info-label">下单时间</span>
            <span class="info-value">2025-01-15 10:30:25</span>
        </div>
        <div class="info-row">
            <span class="info-label">支付方式</span>
            <span class="info-value">微信支付</span>
        </div>
        <div class="info-row">
            <span class="info-label">配送方式</span>
            <span class="info-value">EMS国际快递</span>
        </div>
    </div>

    <!-- 收货信息 -->
    <div class="info-section">
        <div class="section-title">收货信息</div>
        <div class="info-row">
            <span class="info-label">收货人</span>
            <span class="info-value">张三 138****8888</span>
        </div>
        <div class="info-row">
            <span class="info-label">收货地址</span>
            <span class="info-value">北京市朝阳区建国路88号SOHO现代城A座2801室</span>
        </div>
    </div>

    <!-- 商品信息 -->
    <div class="info-section">
        <div class="section-title">商品信息</div>
        <div id="productList">
            <div class="product-item">
                <div class="product-image"><img src="assets/images/products/product-prescription.svg" alt="处方感冒药"></div>
                <div class="product-info">
                    <div class="product-name">
                        处方感冒药
                        <span class="prescription-badge">处方药</span>
                    </div>
                    <div class="product-spec">30片/盒</div>
                </div>
                <div class="product-right">
                    <div class="product-price">¥128</div>
                    <div class="product-quantity">x1</div>
                </div>
            </div>
        </div>
    </div>

    <!-- 费用明细 -->
    <div class="info-section">
        <div class="section-title">费用明细</div>
        <div class="fee-row">
            <span class="fee-label">商品金额</span>
            <span class="fee-value">¥128</span>
        </div>
        <div class="fee-row">
            <span class="fee-label">运费</span>
            <span class="fee-value">¥68</span>
        </div>
        <div class="fee-row">
            <span class="fee-label">优惠</span>
            <span class="fee-value" style="color: #4a9b4e;">-¥0</span>
        </div>
        <div class="fee-row fee-total">
            <span class="fee-label">实付金额</span>
            <span class="fee-value">¥196</span>
        </div>
    </div>

    <!-- 物流信息（已发货状态显示） -->
    <div class="info-section" id="logisticsSection" style="display: none;">
        <div class="section-title">物流信息</div>
        <div class="info-row">
            <span class="info-label">物流公司</span>
            <span class="info-value">EMS国际快递</span>
        </div>
        <div class="info-row">
            <span class="info-label">运单号</span>
            <span class="info-value">EA123456789CN</span>
        </div>
        <div class="logistics-track">
            <div class="track-item">
                <span class="track-time">2025-01-16 14:20</span>
                <span class="track-desc">包裹正在派送中，请保持电话畅通</span>
            </div>
            <div class="track-item">
                <span class="track-time">2025-01-16 08:15</span>
                <span class="track-desc">包裹到达北京朝阳区配送站</span>
            </div>
            <div class="track-item">
                <span class="track-time">2025-01-15 22:30</span>
                <span class="track-desc">包裹已清关，正在国内运输</span>
            </div>
            <div class="track-item">
                <span class="track-time">2025-01-15 16:00</span>
                <span class="track-desc">包裹已从日本发出</span>
            </div>
        </div>
    </div>

    <!-- 底部操作按钮 -->
    <div class="bottom-actions" id="bottomActions">
        <button class="action-btn btn-outline" onclick="contactService()">联系客服</button>
        <button class="action-btn btn-primary" id="primaryAction" onclick="primaryActionClick()">查看进度</button>
    </div>

    <script>
        // 全局变量
        let orderStatus = 'reviewing';
        let orderNumber = '202501150001';

        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 从URL参数获取订单信息
            const urlParams = new URLSearchParams(window.location.search);
            const status = urlParams.get('status') || localStorage.getItem('currentOrderStatus') || 'reviewing';
            orderNumber = urlParams.get('order') || localStorage.getItem('currentOrderNumber') || '202501150001';
            
            // 更新订单号
            document.getElementById('orderNumber').textContent = orderNumber;
            
            // 根据状态更新页面
            updateOrderStatus(status);
        });

        // 更新订单状态
        function updateOrderStatus(status) {
            orderStatus = status;
            const statusBanner = document.getElementById('statusBanner');
            const statusText = document.getElementById('statusText');
            const statusDesc = document.getElementById('statusDesc');
            const primaryBtn = document.getElementById('primaryAction');
            
            switch(status) {
                case 'success':
                case 'pending':
                    statusBanner.className = 'status-banner pending';
                    statusText.textContent = '待付款';
                    statusDesc.textContent = '请尽快完成支付';
                    primaryBtn.textContent = '去支付';
                    break;
                    
                case 'reviewing':
                    statusBanner.className = 'status-banner reviewing';
                    statusText.textContent = '审核中';
                    statusDesc.textContent = '药师正在审核您的健康问卷';
                    primaryBtn.textContent = '查看进度';
                    document.getElementById('questionnaireNotice').style.display = 'block';
                    
                    // 更新进度
                    document.getElementById('reviewingStep').className = 'progress-item current';
                    break;
                    
                case 'shipped':
                    statusBanner.className = 'status-banner';
                    statusText.textContent = '已发货';
                    statusDesc.textContent = '商品正在运输中';
                    primaryBtn.textContent = '确认收货';
                    document.getElementById('logisticsSection').style.display = 'block';
                    
                    // 更新进度
                    document.getElementById('reviewingStep').className = 'progress-item completed';
                    document.getElementById('shippingStep').className = 'progress-item completed';
                    document.getElementById('shippingStep').querySelector('.progress-time').textContent = '2025-01-15 16:00';
                    break;
                    
                case 'completed':
                    statusBanner.className = 'status-banner';
                    statusText.textContent = '已完成';
                    statusDesc.textContent = '感谢您的购买';
                    primaryBtn.textContent = '再次购买';
                    document.getElementById('logisticsSection').style.display = 'block';
                    
                    // 更新进度
                    document.getElementById('reviewingStep').className = 'progress-item completed';
                    document.getElementById('shippingStep').className = 'progress-item completed';
                    document.getElementById('completedStep').className = 'progress-item completed';
                    document.getElementById('completedStep').querySelector('.progress-time').textContent = '2025-01-17 15:30';
                    break;
            }
        }

        // 主要操作按钮点击
        function primaryActionClick() {
            switch(orderStatus) {
                case 'pending':
                    alert('跳转到支付页面');
                    break;
                case 'reviewing':
                    alert('药师正在审核中，预计1-2小时完成');
                    break;
                case 'shipped':
                    if (confirm('确认已收到商品？')) {
                        alert('确认收货成功');
                        updateOrderStatus('completed');
                    }
                    break;
                case 'completed':
                    window.location.href = 'index.html';
                    break;
            }
        }

        // 联系客服
        function contactService() {
            alert('客服电话：400-888-8888');
        }

        // 返回
        function goBack() {
            window.history.back();
        }
    </script>
</body>
</html>
